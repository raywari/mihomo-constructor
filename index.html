<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mihomo Constructor</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="favicon/favicon.svg" type="image/svg+xml" sizes="any">
    <link rel="icon" href="favicon/favicon.ico" sizes="any">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">
  </head>
  <body>
  <header class="brand-header">
    <div class="brand-inner">
      <img
        class="brand-logo"
        src="icons/logo.svg"
        alt="Mihomo Constructor logo"
        width="64"
        height="64"
       />
      <div class="brand-text">
        <div class="brand-title">Mihomo Constructor</div>
        <div class="brand-subtitle">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥–æ–≤ –¥–ª—è Clash/Mihomo</div>
      </div>
    </div>
    <a
      class="brand-action"
      href="https://github.com/raywari/mihomo-constructor"
      target="_blank"
      rel="noreferrer noopener"
      aria-label="–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub"
    >
      <img
        class="brand-action-icon"
        src="icons/github.svg"
        alt="GitHub"
        width="20"
        height="20"
      />
      <span class="brand-action-label">–ü—Ä–æ–µ–∫—Ç –Ω–∞ GitHub</span>
    </a>
  </header>
    <div class="app">
      <section class="card">
        <div class="header">
          <div class="dot"></div>
          <div>
            <h1>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</h1>
            <div class="sub">
              –°—Å—ã–ª–∫–∏ ‚Üí proxies ‚Üí –≥—Ä—É–ø–ø—ã ‚Üí –ø—Ä–∞–≤–∏–ª–∞ ‚Üí –ø–æ–¥–ø–∏—Å–∫–∏
            </div>
          </div>
        </div>

        <div class="body">
          <div class="stack">
            <div class="section">
              <div class="section-title">
                <h2>–í–≤–æ–¥ —Å—Å—ã–ª–æ–∫</h2>
                <div class="row" style="flex: 0 0 auto; max-width: 220px">
                  <button id="pasteDemoBtn">‚ú® –î–µ–º–æ</button>
                  <button class="danger" id="clearBtn">üßπ –û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
              </div>

              <textarea
                id="input"
                placeholder="vless://...
vmess://...
ss://...
..."
              ></textarea>

              <div class="row">
                <button class="primary" id="convertBtn">
                  ‚ö° –°–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥
                </button>
              </div>

              <div class="section-title">
                <h2>–ü–æ–¥–ø–∏—Å–∫–∏ (proxy-providers)</h2>
              </div>

              <div class="group-card">
                <div class="row">
                  <input
                    id="subsUrl"
                    type="url"
                    placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É —Å—é–¥–∞‚Ä¶"
                  />
                  <button id="addSubBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
                </div>
                <div class="hint">
                  Proxy-providers —Å–æ–±–µ—Ä—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ú–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ
                  —Å—Å—ã–ª–æ–∫.
                </div>
                <div
                  id="subsList"
                  class="listbox"
                  style="max-height: 160px"
                ></div>
              </div>

              <div class="switch-row">
                <div>
                  <div><b>Advanced Subscriptions (YAML)</b></div>
                  <div class="sub">–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ ‚Äî –±–µ—Ä—ë–º YAML –æ—Ç—Å—é–¥–∞</div>
                </div>
                <label class="switch">
                  <input type="checkbox" id="subsAdvancedToggle" />
                  <div class="track"><div class="thumb"></div></div>
                </label>
              </div>
              <textarea
                id="subsAdvancedText"
                class="small"
                spellcheck="false"
                style="display: none"
              ></textarea>
            </div>

            <div class="section">
              <div class="section-title">
                <h2>Proxy Groups</h2>
                <button id="addGroupBtn" style="flex: 0 0 auto">
                  ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É
                </button>
              </div>

              <div
                id="groupsContainer"
                class="body"
                style="padding: 0; gap: 10px"
              ></div>

              <div class="switch-row">
                <div>
                  <div><b>Advanced Groups (YAML)</b></div>
                  <div class="sub">–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—Å—Ç –Ω–∏–∂–µ</div>
                </div>
                <label class="switch">
                  <input type="checkbox" id="groupsAdvancedToggle" />
                  <div class="track"><div class="thumb"></div></div>
                </label>
              </div>
              <textarea
                id="groupsAdvancedText"
                class="small"
                spellcheck="false"
                style="display: none"
              ></textarea>
            </div>

            <div class="section">
              <div class="section-title">
            <div class="section-heading">
              <div class="eyebrow">Rules</div>
              <h2>GEOSITE / GEOIP</h2>
              <div class="sub">–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –¥–æ–º–µ–Ω–Ω—ã—Ö –∏ IP —Å–ø–∏—Å–∫–æ–≤</div>
            </div>
                <div class="row" style="flex: 0 0 auto">
                  <button id="autoRulesBtn">‚öôÔ∏è –ê–≤—Ç–æ–≥—Ä—É–ø–ø–∞ –ø—Ä–∞–≤–∏–ª</button>
                </div>
            </div>

            <div class="group-card match-card">
              <div class="match-head">
                <div>
                  <div class="eyebrow">MATCH</div>
                  <div class="match-title">–ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</div>
                </div>
                <div class="match-control">
                  <label class="hint" for="matchPolicy">–ü–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∞–≤–∏–ª–∞</label>
                  <select id="matchPolicy"></select>
                </div>
              </div>
            </div>

              <div class="rules-grid">
                <div class="group-card rules-column">
                  <div class="rules-head">
                    <div class="title">
                      <div class="eyebrow">GEOSITE</div>
                      <h2 style="margin: 0">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–º–µ–Ω–æ–≤</h2>
                      <div class="sub">–§–∞–π–ª: geosite.txt</div>
                    </div>
                    <div
                      class="row nowrap"
                      style="flex: 0 0 auto; gap: 6px; align-items: center"
                    >
                      <button id="loadGeositeBtn" style="flex: 0 0 auto">
                        üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                      </button>
                      <span class="pill" id="geositeStatus">–Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω</span>
                    </div>
                  </div>
                  <div class="rules-toolbar">
                    <div
                      class="row between"
                      style="align-items: flex-end; gap: 10px; flex-wrap: wrap"
                    >
                      <button
                        id="geositeReset"
                        class="ghost"
                        style="flex: 0 0 auto"
                      >
                        –°–±—Ä–æ—Å–∏—Ç—å –æ—Ç–º–µ—á–µ–Ω–Ω–æ–µ
                      </button>
                    </div>
                    <div class="row tight between" style="align-items: center">
                      <input
                        id="geositeSearch"
                        type="text"
                        placeholder="–ü–æ–∏—Å–∫ –ø–æ GEOSITE‚Ä¶"
                      />
                      <span class="pill" id="geositeCount">0</span>
                    </div>
                  </div>

                  <div id="geositeList" class="listbox"></div>
                </div>

                <div class="group-card rules-column">
                  <div class="rules-head">
                    <div class="title">
                      <div class="eyebrow">GEOIP</div>
                      <h2 style="margin: 0">–°—Ç—Ä–∞–Ω—ã –∏ —Å–µ—Ç–∏</h2>
                      <div class="sub">–§–∞–π–ª: geoip.txt</div>
                    </div>
                    <div
                      class="row nowrap"
                      style="flex: 0 0 auto; gap: 6px; align-items: center"
                    >
                      <button id="loadGeoipBtn" style="flex: 0 0 auto">
                        üåç –ó–∞–≥—Ä—É–∑–∏—Ç—å
                      </button>
                      <span class="pill" id="geoipStatus">–Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω</span>
                    </div>
                  </div>
                  <div class="rules-toolbar">
                    <div
                      class="row between"
                      style="align-items: flex-end; gap: 10px; flex-wrap: wrap"
                    >
                      <button
                        id="geoipReset"
                        class="ghost"
                        style="flex: 0 0 auto"
                      >
                        –°–±—Ä–æ—Å–∏—Ç—å –æ—Ç–º–µ—á–µ–Ω–Ω–æ–µ
                      </button>
                    </div>
                    <div class="row tight between" style="align-items: center">
                      <input
                        id="geoipSearch"
                        type="text"
                        placeholder="–ü–æ–∏—Å–∫ –ø–æ GEOIP‚Ä¶"
                      />
                      <span class="pill" id="geoipCount">0</span>
                    </div>
                  </div>

                  <div id="geoipList" class="listbox"></div>
                </div>
              </div>

              <div class="switch-row">
                <div>
                  <div><b>Advanced Rules + Rule-Providers (YAML)</b></div>
                  <div class="sub">–í–∫–ª—é—á–∏ —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é –ø—Ä–∞–≤–∏—Ç—å</div>
                </div>
                <label class="switch">
                  <input type="checkbox" id="rulesAdvancedToggle" />
                  <div class="track"><div class="thumb"></div></div>
                </label>
              </div>
              <textarea
                id="rulesAdvancedText"
                class="small"
                spellcheck="false"
                style="display: none"
                placeholder="rule-providers:
  ...
rules:
  ..."
              ></textarea>
            </div>
          </div>
        </div>
      </section>
      <section class="card">
        <div class="header header-secondary">
          <div
            class="dot"
            style="background: #7ee787; box-shadow: 0 0 12px #7ee787"
          ></div>
          <div>
            <h1>–ì–æ—Ç–æ–≤—ã–π YAML</h1>
            <div class="sub">proxies + groups + providers + rules</div>
          </div>
        </div>

        <div class="body">
          <pre
            id="output"
          ><span style="color:#91a4b7">–ñ–º–∏ ¬´–°–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥¬ª‚Ä¶</span></pre>

          <div class="row">
            <button class="good" id="copyBtn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            <button id="downloadBtn">üíæ –°–∫–∞—á–∞—Ç—å config.yaml</button>
          </div>

          <div class="status" id="status">
            <span class="pill">–æ–∂–∏–¥–∞—é</span><span id="statusText">‚Äî</span>
          </div>
        </div>

        <div class="footer">
          <div>Ctrl/Cmd + Enter ‚Äî —Å–æ–±—Ä–∞—Ç—å.</div>
        </div>
      </section>
    </div>
    <script src="script.js"></script>
  </body>
</html>
